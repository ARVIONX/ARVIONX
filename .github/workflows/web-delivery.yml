name: ğŸŒ ARVIONX Smart Report Web Delivery

on:
  workflow_dispatch:

jobs:
  publish:
    name: ğŸš€ Publish Smart Report to GitHub Pages
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pages: write
      id-token: write

    steps:
      - name: ğŸŒ± Checkout Repository
        uses: actions/checkout@v4

      - name: ğŸ§© Prepare Report
        run: |
          echo "ğŸ§  Preparing latest ARVIONX Smart Report..."
          mkdir -p web_output
          echo "<html><head><meta charset='UTF-8'><title>ARVIONX Smart Report</title></head><body>" > web_output/index.html
          echo "<h1 style='font-family:Arial;'>ğŸ’ ARVIONX Smart Report</h1>" >> web_output/index.html
          echo "<h3>ğŸ“… Generated on: $(date +'%Y-%m-%d %H:%M')</h3>" >> web_output/index.html
          echo "<hr>" >> web_output/index.html
          echo "<pre style='font-family:monospace;'>" >> web_output/index.html
          find logs -name '*.log' -type f -exec cat {} \; >> web_output/index.html
          echo "</pre><hr><p>ğŸš€ Powered by ARVIONX Intelligence Hub v1.0</p></body></html>" >> web_output/index.html
          echo "âœ… Report page generated successfully."

      - name: ğŸ“¦ Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: web_output

      - name: ğŸš€ Deploy to GitHub Pages
        uses: actions/deploy-pages@v4

      - name: âœ… Confirm Deployment
        run: |
          echo "ğŸŒ ARVIONX Smart Report successfully published!"
          echo "ğŸ”— Access via: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/"
