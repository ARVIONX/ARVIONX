name: ðŸ“¤ ARVIONX Smart Report Delivery

on:
  workflow_dispatch:

jobs:
  deliver:
    name: ðŸš€ Send Smart Report
    runs-on: ubuntu-latest

    steps:
      - name: ðŸŒ± Checkout Repository
        uses: actions/checkout@v4

      - name: ðŸ“¦ Prepare Latest Smart Report
        run: |
          echo "ðŸ“¦ Collecting latest report..."
          mkdir -p temp_reports
          latest_log=$(ls -t logs/*.log | head -n 1)
          cp "$latest_log" temp_reports/final_report.log
          echo "âœ… Latest report ready for sending."

      - name: ðŸ¤– Send Report to Telegram
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: |
          echo "ðŸ¤– Sending Smart Report via ARVIONX Bot..."
          message="ðŸ“Š *ARVIONX Smart Report Update*%0A------------------------------------%0Aâœ… System: Operational%0AðŸ“ˆ Status: Stable%0AðŸ•“ Generated: $(date +'%Y-%m-%d %H:%M')%0A------------------------------------%0AðŸ“¤ Report sent successfully."
          curl -s -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage" \
          -d chat_id="${TELEGRAM_CHAT_ID}" \
          -d text="$message" \
          -d parse_mode="Markdown"

      - name: ðŸ§  Confirm Delivery
        run: |
          echo "------------------------------------"
          echo "âœ… ARVIONX Smart Report sent successfully via Telegram."
          echo "ðŸ“© Delivery verified."
          echo "------------------------------------"
